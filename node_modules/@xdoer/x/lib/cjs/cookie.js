"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Cookie = void 0;

class Cookie {
  constructor() {
    this.cookiesMap = (() => {
      const cookies = document.cookie.split(';').map(n => {
        const [first, ...Other] = n.split('=');
        return [first.trim(), Other.join('=')];
      });
      const cookiesMap = new Map();

      for (let i of cookies) cookiesMap.set(i[0], i[1]);

      return cookiesMap;
    })();
  }

  get(key) {
    return decodeURIComponent(this.cookiesMap.get(key) || '');
  }

  set(key, value) {
    let expired = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 24 * 60 * 60 * 1000;
    const date = new Date(+new Date() + expired);
    document.cookie = key + '=' + encodeURIComponent(value) + ';expires=' + date.toUTCString();
  }

  has(key) {
    return !!this.cookiesMap.get(key);
  }

  remove(key) {
    this.set(key, '', -1);
    return !this.has(key);
  }

  clear() {
    for (let [name] of this.cookiesMap) {
      this.remove(name);
    }
  }

}

exports.Cookie = Cookie;